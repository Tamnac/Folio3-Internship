<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/87ad30c39c.js"></script>
    <link rel="stylesheet" href="../source/design.css">
    <!---Chart-->
    <script async="" src="./Line Chart_files/analytics.js.download"></script>
    <script src="./Line Chart_files/Chart.min.js.download"></script>
    <script src="./Line Chart_files/utils.js.download"></script>
    <style>
        canvas {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
        }
    </style>
    <style type="text/css">
        /* Chart.js */
        @keyframes chartjs-render-animation {
            from {
                opacity: .99
            }

            to {
                opacity: 1
            }
        }

        .chartjs-render-monitor {
            animation: chartjs-render-animation 1ms
        }

        .chartjs-size-monitor,
        .chartjs-size-monitor-expand,
        .chartjs-size-monitor-shrink {
            position: absolute;
            direction: ltr;
            left: 0;
            top: 0;
            right: 0;
            bottom: 0;
            overflow: hidden;
            pointer-events: none;
            visibility: hidden;
            z-index: -1
        }

        .chartjs-size-monitor-expand>div {
            position: absolute;
            width: 1000000px;
            height: 1000000px;
            left: 0;
            top: 0
        }

        .chartjs-size-monitor-shrink>div {
            position: absolute;
            width: 200%;
            height: 200%;
            left: 0;
            top: 0
        }
    </style>
    <title>Goals</title>

</head>

<body>
    <!--Navbar start-->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <span class="navbar-brand mb-0 h1"><span id="logo-u"><b>U</b></span>fit.</span>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText"
                aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarText">

                <div class="row w-100">

                    <div class="col-md-8">

                        <ul class="navbar-nav">

                            <li class="nav-item active">

                                <a class="nav-link" href="#"> <span class="sr-only">(current)</span></a>
                            </li>

                            <li class="nav-item">

                                <a class="nav-link" href="./Home.html">Home</a>
                            </li>

                            <li class="nav-item">

                                <a class="nav-link" href="./Goals.html">Goals</a>
                            </li>

                            <li class="nav-item">

                                <a class="nav-link" href="./food.html">Food</a>
                            </li>

                            <li class="nav-item">

                                <a class="nav-link" href="./exercise.html">Exercise</a>
                            </li>
                        </ul>
                    </div>

                    <div class="col-md-4 text-right">

                        <div class="nav-item dropdown">

                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">

                                <b>Atif Mehmood</b>

                                <li class="fa fa-user ml-3 nav-icon"></li>
                            </a>

                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">

                                <a class="dropdown-item" href="./Landing.html">Logout</a>

                                <a class="dropdown-item" href="./profile.html">Profile</a>

                            </div>

                        </div>



                    </div>

                </div>

            </div>

        </div>

    </nav>
    <!--Navbar end-->



    <section class="container">
        <div class="row p-3">
            <div class="col-lg-12 text-center">
                <h2>Goal Details</h2>
            </div>
        </div>
        <div class="row p-3">
            <div class=" col-md-6  pt-3">
                <div id="current-goal-div" class="card card-body">
                    <h3 class="card-title text-center">Current Goal</h3>
                    <h6 class="m-4">You Don't Have Any Goal In Progress</h6>

                </div>
                <div class="d-flex pt-2">
                    <button class="btn btnn-primary" data-toggle="modal" data-target="#addGoalModal">Add Goal</button>
                </div>
            </div>
            <div class="col-md-6 text-center">

                <div style="width:100%;">
                    <div class="chartjs-size-monitor">
                        <div class="chartjs-size-monitor-expand">
                            <div class="">

                            </div>
                        </div>
                        <div class="chartjs-size-monitor-shrink">
                            <div class="">

                            </div>
                        </div>
                    </div>
                    <canvas id="canvas" style="display: block; width: 100%; height: 350px;"
                        class="chartjs-render-monitor">
                    </canvas>
                </div>


            </div>
        </div>
    </section>
    <br>
    <br>
    <section class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <h2>Previous Goals</h2>
                <hr>
            </div>
        </div>
        <div id="all-goals-div" class="row p-3">


        </div>

    </section>

    <footer class="text-white">

        <div class="container">

            <div class="pt-3">

                <span class="navbar-brand mb-0 h1"><span id="logo-u"><b>U</b></span>fit.</span>
            </div>

            <div class='row pt-4'>

                <div class="col-lg-6">



                    <div class="footer-item">

                        <li class="fas fa-envelope"></li><span>email@email.com</span>
                    </div>

                    <div class="footer-item">

                        <li class="fas fa-phone"></li><span>+92-12345678-0</span>
                    </div>

                </div>

                <div class="col-lg-6">

                    <div class="footer-item">

                        <i class="fa fa-sign-in" aria-hidden="true"></i>

                        <a href="./Landing.html" class="text-white ml-3">

                            Logout</a>

                    </div>
                    <div class="text-right">
                        <i class="fab fa-facebook-square fa-2x
    
                                pl-2" aria-hidden="true"></i>

                        <i class="fab fa-linkedin fa-2x pl-2" aria-hidden="true"></i>

                        <i class="fab fa-twitter-square fa-2x
    
                                pl-2" aria-hidden="true"></i>

                    </div>

                </div>

            </div>





            <hr class="footer-hr">

            <div class="text-center credits pb-2">

                Lorem ipsum dolor sit amet consectetur adipisicing elit.

            </div>


            <section class="modal fade" id="editGoalModal" role="dialog" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title text-dark">Edit Goal</h4>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="container-fluid">
                                <form>
                                    <div class="form-group row">
                                        <label class="col-form-label text-dark">Goal Weight (lbs)</label>
                                        <div class="col-lg-8">
                                            <input type="number" class="form-control" value=96>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-form-label text-dark">Date of Completion</label>
                                        <div class="col-lg-8">
                                            <input type="date" class="form-control">
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btnn-primary">Save changes</button>
                        </div>
                    </div>
                </div>
            </section>
            <section class="modal fade" id="addGoalModal" role="dialog" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title text-dark">Add Goal</h4>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="container-fluid">
                                <form>
                                    <div class="form-group row">
                                        <label class="col-form-label text-dark">Goal Weight (lbs)</label>
                                        <div class="col-lg-8">
                                            <input type="number" id="add-goal-weight" class="form-control">
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-form-label text-dark">Date of Completion</label>
                                        <div class="col-lg-8">
                                            <input type="date" id="add-goal-date" class="form-control">
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                            <button type="button" id="add-goal-btn" class="btn btnn-primary">Add Goal</button>
                        </div>
                    </div>
                </div>
            </section>


    </footer>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <script src="../source/utils.js"></script>
    <script src="../source/loggers.js"></script>

</body>

<script>

    $(() => {
        fetchGoals()


        $("#add-goal-btn").click(() => {
            let goalWeight = $("#add-goal-weight").val()
            let goalDate = $("#add-goal-date").val()
            if (goalWeight && goalDate)
                $.post("http://localhost:8000/goals", { "goalWeight": goalWeight, "goalDate": goalDate }, (data) => {
                    $("add-goal-weight").val(0)
                    fetchGoals()
                    $('#addGoalModal').modal('hide')
                })
        })
    })
</script>
<script>
    var MONTHS = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
    var config = {
        type: 'line',
        data: {
            labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
            datasets: [{
                label: 'My Second dataset',
                fill: false,
                backgroundColor: "red",
                borderColor: "red",
                data: [
                    220.462,
                    210.462,
                    200.462,
                    205,
                    200.56,
                    200.462,
                    210
                ],
            }]
        },
        options: {
            responsive: true,
            title: {
                display: true,
                text: 'Weight Progress'
            },
            tooltips: {
                mode: 'index',
                intersect: false,
            },
            hover: {
                mode: 'nearest',
                intersect: true
            },
            scales: {
                xAxes: [{
                    display: true,
                    scaleLabel: {
                        display: true,
                        labelString: 'Day'
                    }
                }],
                yAxes: [{
                    display: true,
                    scaleLabel: {
                        display: true,
                        labelString: 'Weight'
                    }
                }]
            }
        }
    };

    window.onload = function () {
        var ctx = document.getElementById('canvas').getContext('2d');
        window.myLine = new Chart(ctx, config);
    };

    document.getElementById('randomizeData').addEventListener('click', function () {
        config.data.datasets.forEach(function (dataset) {
            dataset.data = dataset.data.map(function () {
                return randomScalingFactor();
            });

        });

        window.myLine.update();
    });

    var colorNames = Object.keys(window.chartColors);
    document.getElementById('addDataset').addEventListener('click', function () {
        var colorName = colorNames[config.data.datasets.length % colorNames.length];
        var newColor = window.chartColors[colorName];
        var newDataset = {
            label: 'Dataset ' + config.data.datasets.length,
            backgroundColor: newColor,
            borderColor: newColor,
            data: [],
            fill: false
        };

        for (var index = 0; index < config.data.labels.length; ++index) {
            newDataset.data.push(randomScalingFactor());
        }

        config.data.datasets.push(newDataset);
        window.myLine.update();
    });

    document.getElementById('addData').addEventListener('click', function () {
        if (config.data.datasets.length > 0) {
            var month = MONTHS[config.data.labels.length % MONTHS.length];
            config.data.labels.push(month);

            config.data.datasets.forEach(function (dataset) {
                dataset.data.push(randomScalingFactor());
            });

            window.myLine.update();
        }
    });

    document.getElementById('removeDataset').addEventListener('click', function () {
        config.data.datasets.splice(0, 1);
        window.myLine.update();
    });

    document.getElementById('removeData').addEventListener('click', function () {
        config.data.labels.splice(-1, 1); // remove the label first

        config.data.datasets.forEach(function (dataset) {
            dataset.data.pop();
        });

        window.myLine.update();
    });
</script>

</html>